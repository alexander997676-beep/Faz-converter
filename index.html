<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAZ TITAN Dashboard</title>
    
    <!-- Fonts: Plus Jakarta Sans (Standard for Fintech) -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- ApexCharts (Pro Graphing) -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <style>
        :root {
            --bg: #f8faff;
            --sidebar: #ffffff;
            --card: #ffffff;
            --primary: #2962ff; /* Royal Blue */
            --primary-light: #e3eaff;
            --text-dark: #111827;
            --text-grey: #6b7280;
            --success: #00c853;
            --border: #e5e7eb;
            --shadow: 0 4px 20px rgba(0,0,0,0.03);
            --shadow-hover: 0 10px 30px rgba(41, 98, 255, 0.1);
        }

        body {
            margin: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: var(--text-dark);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px;
            background: var(--sidebar);
            border-right: 1px solid var(--border);
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 50px;
        }
        .logo span { color: var(--primary); }

        .nav-menu { list-style: none; padding: 0; }
        .nav-item {
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 12px;
            color: var(--text-grey);
            font-weight: 500;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .nav-item:hover, .nav-item.active { background: var(--primary-light); color: var(--primary); }
        .nav-item i { width: 20px; }

        /* --- MAIN DASHBOARD --- */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            grid-template-rows: auto 1fr;
            gap: 30px;
        }

        /* Header */
        .top-bar { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; }
        .page-title h1 { margin: 0; font-size: 1.8rem; font-weight: 700; }
        .page-title p { margin: 5px 0 0; color: var(--text-grey); font-size: 0.9rem; }
        .user-profile { display: flex; align-items: center; gap: 15px; }
        .avatar { width: 40px; height: 40px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; }

        /* Converter Card */
        .card {
            background: var(--card);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: 0.3s;
            position: relative;
        }
        .card:hover { box-shadow: var(--shadow-hover); }

        .converter-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        .field-group label { display: block; font-size: 0.85rem; font-weight: 600; color: var(--text-grey); margin-bottom: 8px; }
        .field-group input, .field-group select {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border);
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            outline: none;
            transition: 0.2s;
            background: #fafafa;
        }
        .field-group input:focus, .field-group select:focus { border-color: var(--primary); background: white; }

        .convert-btn {
            background: var(--primary);
            color: white;
            padding: 18px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 10px;
            transition: 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        .convert-btn:hover { background: #1a4bd6; transform: translateY(-2px); }

        /* Result Area */
        .result-box {
            margin-top: 30px;
            padding: 25px;
            background: var(--primary-light);
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(41, 98, 255, 0.1);
        }
        .res-val { font-size: 2.5rem; font-weight: 800; color: var(--primary); letter-spacing: -0.5px; }
        .res-rate { color: var(--text-grey); font-size: 0.9rem; margin-top: 5px; }

        /* Watchlist (Right Side) */
        .watchlist-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .watchlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }
        .w-flag { width: 40px; height: 40px; border-radius: 10px; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .w-info { flex: 1; margin-left: 15px; }
        .w-code { font-weight: 700; font-size: 1rem; }
        .w-name { font-size: 0.8rem; color: var(--text-grey); }
        .w-value { font-weight: 700; font-size: 1.1rem; color: var(--text-dark); }
        .w-spark { height: 30px; width: 60px; } /* Placeholder for sparkline */

        /* Chart Section */
        .chart-card {
            grid-column: 1 / -1;
            min-height: 350px;
        }

        /* Notification */
        .toast {
            position: fixed;
            top: 30px; right: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(200%);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
        }
        .toast.show { transform: translateX(0); }

        /* Responsive */
        @media (max-width: 1000px) {
            .sidebar { display: none; } /* Hide sidebar for mobile demo */
            .main-content { grid-template-columns: 1fr; padding: 20px; }
        }
    </style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <div>
        <div class="logo"><i class="fas fa-layer-group"></i> FAZ <span>TITAN</span></div>
        <ul class="nav-menu">
            <li class="nav-item active"><i class="fas fa-chart-pie"></i> Dashboard</li>
            <li class="nav-item"><i class="fas fa-wallet"></i> Portfolio</li>
            <li class="nav-item"><i class="fas fa-exchange-alt"></i> Exchange</li>
            <li class="nav-item"><i class="fas fa-file-invoice"></i> Reports</li>
        </ul>
    </div>
    <div class="nav-item" style="color: #ef4444;"><i class="fas fa-sign-out-alt"></i> Logout</div>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">
    
    <!-- Header -->
    <div class="top-bar">
        <div class="page-title">
            <h1>Currency Exchange</h1>
            <p>Real-time market rates & analytics</p>
        </div>
        <div class="user-profile">
            <div style="text-align: right;">
                <div style="font-weight: 700; font-size: 0.9rem;">Admin User</div>
                <div style="font-size: 0.8rem; color: #999;">Pro Plan</div>
            </div>
            <div class="avatar">A</div>
        </div>
    </div>

    <!-- Main Converter -->
    <div class="card">
        <div class="converter-section">
            <div class="field-group">
                <label>Amount</label>
                <input type="number" id="amount" value="1000">
            </div>
            
            <div class="input-row">
                <div class="field-group">
                    <label>From Currency</label>
                    <select id="from">
                        <option value="USD">USD - US Dollar</option>
                        <option value="EUR">EUR - Euro</option>
                        <option value="GBP">GBP - Pound</option>
                        <option value="PKR">PKR - Rupee</option>
                    </select>
                </div>
                <div class="field-group">
                    <label>To Currency</label>
                    <select id="to">
                        <option value="PKR" selected>PKR - Rupee</option>
                        <option value="USD">USD - US Dollar</option>
                        <option value="EUR">EUR - Euro</option>
                        <option value="AED">AED - Dirham</option>
                    </select>
                </div>
            </div>

            <button class="convert-btn" onclick="executeTrade()">
                <i class="fas fa-bolt"></i> Execute Conversion
            </button>

            <div class="result-box">
                <div class="res-val" id="main-result">0.00</div>
                <div class="res-rate" id="sub-result">Rate: --</div>
            </div>
        </div>
    </div>

    <!-- Watchlist -->
    <div class="watchlist-container">
        <h3 style="margin: 0 0 10px 0;">Live Watchlist</h3>
        
        <!-- List Items (Will be populated nicely) -->
        <div class="watchlist-item">
            <div class="w-flag">ðŸ‡ºðŸ‡¸</div>
            <div class="w-info">
                <div class="w-code">USD</div>
                <div class="w-name">US Dollar</div>
            </div>
            <div class="w-value" id="watch-usd">--</div>
        </div>

        <div class="watchlist-item">
            <div class="w-flag">ðŸ‡ªðŸ‡º</div>
            <div class="w-info">
                <div class="w-code">EUR</div>
                <div class="w-name">Euro</div>
            </div>
            <div class="w-value" id="watch-eur">--</div>
        </div>

        <div class="watchlist-item">
            <div class="w-flag">ðŸ‡¬ðŸ‡§</div>
            <div class="w-info">
                <div class="w-code">GBP</div>
                <div class="w-name">British Pound</div>
            </div>
            <div class="w-value" id="watch-gbp">--</div>
        </div>
    </div>

    <!-- Chart -->
    <div class="card chart-card">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <h3 style="margin:0;">Market Trend</h3>
            <select style="border:none; background: #f0f0f0; padding: 5px 10px; border-radius: 5px;">
                <option>7 Days</option>
                <option>30 Days</option>
            </select>
        </div>
        <div id="chart"></div>
    </div>

</div>

<!-- Toast Notification -->
<div class="toast" id="toast">
    <i class="fas fa-check-circle" style="color: var(--primary); font-size: 1.5rem;"></i>
    <div>
        <div style="font-weight: 700;">Success</div>
        <div style="font-size: 0.9rem; color: #666;" id="toast-msg">Transaction completed</div>
    </div>
</div>

<script>
    // --- 1. APEXCHARTS SETUP ---
    // We initialize a nice looking area chart
    var options = {
        series: [{
            name: 'Exchange Rate',
            data: [278.10, 278.50, 277.90, 279.00, 278.20, 278.80, 279.50]
        }],
        chart: {
            type: 'area',
            height: 300,
            toolbar: { show: false },
            fontFamily: 'Plus Jakarta Sans, sans-serif'
        },
        colors: ['#2962ff'],
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                opacityFrom: 0.4,
                opacityTo: 0.05,
                stops: [0, 90, 100]
            }
        },
        dataLabels: { enabled: false },
        stroke: { curve: 'smooth', width: 3 },
        xaxis: {
            categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            axisBorder: { show: false },
            axisTicks: { show: false }
        },
        yaxis: { show: false }, // Minimal look
        grid: {
            borderColor: '#f1f1f1',
        },
        tooltip: {
            theme: 'light'
        }
    };

    var chart = new ApexCharts(document.querySelector("#chart"), options);
    chart.render();


    // --- 2. LOGIC ---
    
    function showToast(msg) {
        const t = document.getElementById('toast');
        document.getElementById('toast-msg').textContent = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    async function executeTrade() {
        const amount = document.getElementById('amount').value;
        const from = document.getElementById('from').value;
        const to = document.getElementById('to').value;
        const btn = document.querySelector('.convert-btn');
        const mainRes = document.getElementById('main-result');
        const subRes = document.getElementById('sub-result');

        // Loading State
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        btn.style.opacity = '0.7';

        try {
            // Main Conversion
            const url = `https://api.xyro.site/currency/convert?amount=${amount}&from=${from}&to=${to}`;
            const res = await fetch(url);
            const json = await res.json();

            if(json.status) {
                // Determine value logic (based on your specific API structure)
                let val = 0;
                if(typeof json.data === 'number') val = json.data;
                else if(json.data.result) val = json.data.result;
                else if(json.data.converted) val = json.data.converted;
                else if(json.data.rate) val = json.data.rate * amount;

                // Update Main Card
                const formatted = val.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                const unitRate = (val / amount).toFixed(4);

                mainRes.textContent = `${formatted} ${to}`;
                subRes.textContent = `1 ${from} = ${unitRate} ${to}`;
                
                showToast(`Converted ${amount} ${from} to ${to}`);
                
                // Update Chart Data (Simulation)
                updateChartSimulation(unitRate);
                
                // Trigger Watchlist Update
                updateWatchlist(amount, from);

            } else {
                showToast("API Error");
            }

        } catch(e) {
            console.error(e);
            showToast("Network Error");
        }

        // Reset Button
        btn.innerHTML = '<i class="fas fa-bolt"></i> Execute Conversion';
        btn.style.opacity = '1';
    }

    // Update Watchlist (Parallel Fetching simulation)
    async function updateWatchlist(amount, fromBase) {
        const targets = ['USD', 'EUR', 'GBP'];
        
        targets.forEach(async (target) => {
            if(target === fromBase) {
                document.getElementById(`watch-${target.toLowerCase()}`).textContent = parseFloat(amount).toFixed(2);
                return;
            }
            
            try {
                const res = await fetch(`https://api.xyro.site/currency/convert?amount=${amount}&from=${fromBase}&to=${target}`);
                const json = await res.json();
                
                if(json.status) {
                     let val = 0;
                    if(typeof json.data === 'number') val = json.data;
                    else if(json.data.result) val = json.data.result;
                    else if(json.data.rate) val = json.data.rate * amount;

                    document.getElementById(`watch-${target.toLowerCase()}`).textContent = val.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                }
            } catch(e) {}
        });
    }

    function updateChartSimulation(baseRate) {
        // Create a fake trend around the real rate
        let base = parseFloat(baseRate);
        let newData = [];
        for(let i=0; i<7; i++) {
            let variance = (Math.random() - 0.5) * (base * 0.02);
            newData.push((base + variance).toFixed(2));
        }
        chart.updateSeries([{ data: newData }]);
    }

</script>

</body>
</html>
